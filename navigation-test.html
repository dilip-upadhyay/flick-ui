<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigation Overlap Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .success { border-color: #4caf50; background: #f1f8e9; }
        .warning { border-color: #ff9800; background: #fff3e0; }
        .error { border-color: #f44336; background: #ffebee; }
        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            background: #2196f3;
            color: white;
        }
        button:hover { background: #1976d2; }
        .results {
            margin-top: 10px;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 4px;
        }
        .step {
            margin: 10px 0;
            padding: 10px;
            border-left: 4px solid #2196f3;
            background: #f8f9fa;
        }
        pre {
            background: #333;
            color: #fff;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>üß≠ Navigation Overlap Prevention Test</h1>
    
    <div class="test-section success">
        <h2>‚úÖ Test Environment Ready</h2>
        <p>Angular development server is running on <strong>localhost:4200</strong></p>
        <p>Navigation overlap prevention CSS fixes have been implemented</p>
    </div>

    <div class="test-section">
        <h2>üìã Test Configurations</h2>
        <p>Two test configurations have been prepared:</p>
        <ul>
            <li><strong>Navigation Position Demo</strong> - Basic top/bottom navigation</li>
            <li><strong>Navigation Overlap Test</strong> - Comprehensive 4-position navigation with forms</li>
        </ul>
        
        <button onclick="loadNavigationDemo()">Load Navigation Demo</button>
        <button onclick="loadOverlapTest()">Load Overlap Test</button>
        <button onclick="openDesigner()">Open Designer</button>
        
        <div id="config-results" class="results" style="display: none;"></div>
    </div>

    <div class="test-section">
        <h2>üîß Manual Testing Steps</h2>
        <div class="step">
            <strong>Step 1:</strong> Click "Open Designer" to navigate to the designer page
        </div>
        <div class="step">
            <strong>Step 2:</strong> In the designer, look for the toolbar at the top
        </div>
        <div class="step">
            <strong>Step 3:</strong> Click the "Templates" button (should have a dropdown menu)
        </div>
        <div class="step">
            <strong>Step 4:</strong> Select "Load Test Config" from the dropdown
        </div>
        <div class="step">
            <strong>Step 5:</strong> Observe if navigation components load without overlapping content
        </div>
    </div>

    <div class="test-section">
        <h2>üîç What to Verify</h2>
        <ul>
            <li>‚úÖ Top navigation should appear below the app header (64px from top)</li>
            <li>‚úÖ Left navigation should not overlap with main content</li>
            <li>‚úÖ Right navigation should not overlap with main content</li>
            <li>‚úÖ Form fields should be fully visible and accessible</li>
            <li>‚úÖ No visual overlaps between navigation and content</li>
            <li>‚úÖ Proper z-index layering (app header > navigation > content)</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>üß™ Browser Console Tests</h2>
        <p>After loading the configuration, run these commands in the browser console:</p>
        
        <button onclick="copyConsoleCode('checkStyles')">Copy Style Check Code</button>
        <button onclick="copyConsoleCode('checkOverlaps')">Copy Overlap Check Code</button>
        <button onclick="copyConsoleCode('checkZIndex')">Copy Z-Index Check Code</button>
        
        <div id="console-code" style="display: none;">
            <h4>Style Check:</h4>
            <pre id="style-check-code">
// Check navigation styles
const navElements = document.querySelectorAll('[class*="navigation"], .component-navigation');
navElements.forEach((nav, index) => {
    const styles = window.getComputedStyle(nav);
    console.log(`Navigation ${index + 1}:`, {
        position: styles.position,
        zIndex: styles.zIndex,
        top: styles.top,
        left: styles.left,
        right: styles.right
    });
});
            </pre>
            
            <h4>Overlap Check:</h4>
            <pre id="overlap-check-code">
// Check for overlaps
const navs = document.querySelectorAll('[class*="navigation"]');
const content = document.querySelectorAll('form, [class*="form"], [class*="content"]');
let overlaps = 0;

navs.forEach((nav, navIdx) => {
    const navRect = nav.getBoundingClientRect();
    content.forEach((cont, contIdx) => {
        const contRect = cont.getBoundingClientRect();
        const isOverlapping = !(navRect.right < contRect.left || 
                               contRect.right < navRect.left || 
                               navRect.bottom < contRect.top || 
                               contRect.bottom < navRect.top);
        if (isOverlapping) {
            console.log(`‚ùå OVERLAP: Nav ${navIdx + 1} overlaps Content ${contIdx + 1}`);
            overlaps++;
        }
    });
});

console.log(overlaps === 0 ? '‚úÖ No overlaps detected!' : `‚ùå Found ${overlaps} overlaps`);
            </pre>
            
            <h4>Z-Index Check:</h4>
            <pre id="zindex-check-code">
// Check z-index hierarchy
const header = document.querySelector('.app-header, [class*="header"]');
const navs = document.querySelectorAll('[class*="navigation"]');

console.log('Z-Index Hierarchy:');
if (header) {
    console.log(`App Header: ${getComputedStyle(header).zIndex}`);
}
navs.forEach((nav, i) => {
    console.log(`Navigation ${i + 1}: ${getComputedStyle(nav).zIndex}`);
});
            </pre>
        </div>
    </div>

    <div class="test-section warning">
        <h2>‚ö†Ô∏è Expected Issues to Watch For</h2>
        <ul>
            <li>Navigation overlapping the app header at the top</li>
            <li>Form fields hidden behind left or right sidebars</li>
            <li>Content not properly indented when navigation is positioned</li>
            <li>Incorrect z-index values causing layering problems</li>
            <li>Different behavior between design mode and preview mode</li>
        </ul>
    </div>

    <script>
        async function loadNavigationDemo() {
            try {
                const response = await fetch('http://localhost:4200/assets/configs/navigation-position-demo.json');
                const config = await response.json();
                localStorage.setItem('designer-config', JSON.stringify(config));
                showResults('Navigation Position Demo loaded successfully! Go to designer and click Load.', 'success');
            } catch (error) {
                showResults('Error loading navigation demo: ' + error.message, 'error');
            }
        }

        async function loadOverlapTest() {
            try {
                const response = await fetch('http://localhost:4200/assets/configs/navigation-overlap-test.json');
                const config = await response.json();
                localStorage.setItem('designer-config', JSON.stringify(config));
                showResults('Navigation Overlap Test loaded successfully! Go to designer and click Load.', 'success');
            } catch (error) {
                showResults('Error loading overlap test: ' + error.message, 'error');
            }
        }

        function openDesigner() {
            window.open('http://localhost:4200/designer', '_blank');
        }

        function showResults(message, type) {
            const results = document.getElementById('config-results');
            results.style.display = 'block';
            results.className = 'results ' + type;
            results.innerHTML = message;
        }

        function copyConsoleCode(type) {
            const codeDiv = document.getElementById('console-code');
            codeDiv.style.display = 'block';
            
            let code = '';
            switch(type) {
                case 'checkStyles':
                    code = document.getElementById('style-check-code').textContent;
                    break;
                case 'checkOverlaps':
                    code = document.getElementById('overlap-check-code').textContent;
                    break;
                case 'checkZIndex':
                    code = document.getElementById('zindex-check-code').textContent;
                    break;
            }
            
            navigator.clipboard.writeText(code.trim()).then(() => {
                alert('Code copied to clipboard! Paste it in the browser console.');
            });
        }
    </script>
</body>
</html>
